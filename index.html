<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <!-- iPad App Settings -->
Â  Â  <meta name="apple-mobile-web-app-capable" content="yes">
Â  Â  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
Â  Â  <meta name="apple-mobile-web-app-title" content="To-Do List">
Â  Â Â 
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
Â  Â  <title>To-Do List | Deep Analytics</title>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --bg: #ffffff; --text: #0f172a; --accent: #4f46e5; --secondary: #64748b;
Â  Â  Â  Â  Â  Â  --card: #f8fafc; --border: #e2e8f0; --success: #10b981; --danger: #ef4444;Â 
Â  Â  Â  Â  Â  Â  --warning: #f59e0b; --h0: #f1f5f9; --h4: #4f46e5;
Â  Â  Â  Â  }
Â  Â  Â  Â  [data-theme="dark"] {
Â  Â  Â  Â  Â  Â  --bg: #0f172a; --text: #f1f5f9; --card: #1e293b; --border: #334155; --h0: #334155;
Â  Â  Â  Â  }

Â  Â  Â  Â  * { box-sizing: border-box; font-family: 'Inter', -apple-system, sans-serif; -webkit-tap-highlight-color: transparent; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {Â 
Â  Â  Â  Â  Â  Â  background: var(--bg); color: var(--text); margin: 0; padding: 20px;Â 
Â  Â  Â  Â  Â  Â  padding-top: env(safe-area-inset-top);Â 
Â  Â  Â  Â  Â  Â  display: flex; justify-content: center; transition: 0.2s; overscroll-behavior: none;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .container { width: 100%; max-width: 850px; padding-bottom: 50px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-top: 10px; }
Â  Â  Â  Â  .nav-switch { display: flex; background: var(--card); padding: 4px; border-radius: 12px; border: 1px solid var(--border); }
Â  Â  Â  Â  .nav-btn { padding: 8px 20px; border: none; border-radius: 9px; cursor: pointer; font-weight: 700; font-size: 0.85rem; background: transparent; color: var(--secondary); transition: 0.2s; }
Â  Â  Â  Â  .nav-btn.active { background: var(--bg); color: var(--accent); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }

Â  Â  Â  Â  .score-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 25px; }
Â  Â  Â  Â  .score-card { background: var(--card); padding: 15px 10px; border-radius: 16px; border: 1px solid var(--border); text-align: center; }
Â  Â  Â  Â  .score-v { font-size: 1.2rem; font-weight: 800; color: var(--accent); display: block; }
Â  Â  Â  Â  .score-l { font-size: 0.6rem; color: var(--secondary); text-transform: uppercase; font-weight: 800; letter-spacing: 0.5px; }

Â  Â  Â  Â  .chart-card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 20px; margin-bottom: 20px; }
Â  Â  Â  Â  .chart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
Â  Â  Â  Â  .chart-label { font-size: 0.75rem; font-weight: 800; color: var(--secondary); text-transform: uppercase; }

Â  Â  Â  Â  .month-select { padding: 6px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-size: 0.8rem; font-weight: 600; outline: none; }

Â  Â  Â  Â  .dot-grid-wrapper { overflow-x: auto; padding-bottom: 10px; }
Â  Â  Â  Â  .dot-grid { display: grid; grid-template-rows: repeat(7, 12px); grid-auto-flow: column; gap: 4px; width: max-content; }
Â  Â  Â  Â  .dot { width: 12px; height: 12px; border-radius: 3px; background: var(--h0); }

Â  Â  Â  Â  .habit-card { background: var(--card); border: 1px solid var(--border); padding: 18px; border-radius: 20px; margin-bottom: 15px; border-left: 6px solid var(--border); transition: 0.2s; }
Â  Â  Â  Â  .subject-badge { font-size: 0.65rem; font-weight: 900; text-transform: uppercase; margin-bottom: 6px; display: inline-block; padding: 2px 0; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .section-title { font-size: 0.85rem; font-weight: 800; color: var(--secondary); text-transform: uppercase; letter-spacing: 1px; margin: 30px 0 10px 5px; border-bottom: 2px solid var(--border); padding-bottom: 5px; display: inline-block; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Updated Controls Layout */
Â  Â  Â  Â  .controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: flex-end; }
Â  Â  Â  Â  .day-group { display: flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 12px; border: 1px solid var(--border); }
Â  Â  Â  Â  .day-group.yest { background: rgba(0,0,0,0.03); }
Â  Â  Â  Â  .day-group-label { font-size: 0.6rem; font-weight: 800; color: var(--secondary); writing-mode: vertical-lr; transform: rotate(180deg); text-align: center; margin-right: 2px; height: 35px; }

Â  Â  Â  Â  .control-item { text-align: center; }
Â  Â  Â  Â  .num-input { width: 45px; padding: 6px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--text); text-align: center; font-size: 0.85rem; font-weight: 700; }
Â  Â  Â  Â  .score-tiny { font-size: 0.55rem; color: var(--secondary); text-transform: uppercase; font-weight: 700; display: block; margin-bottom: 2px;}

Â  Â  Â  Â  .input-bar { display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 10px; background: var(--card); padding: 18px; border-radius: 20px; border: 1px solid var(--border); margin-bottom: 25px; }
Â  Â  Â  Â  .input-bar input, .input-bar select { padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-size: 0.9rem; font-weight: 500; outline: none; }
Â  Â  Â  Â  .add-btn { background: var(--accent); color: white; border: none; border-radius: 12px; width: 48px; cursor: pointer; font-size: 1.2rem; font-weight: bold; }

Â  Â  Â  Â  .edit-panel { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border); gap: 10px; align-items: center; flex-wrap: wrap; }
Â  Â  Â  Â  .edit-panel.active { display: flex; }

Â  Â  Â  Â  .cb { position: relative; width: 30px; height: 30px; cursor: pointer; display: block; margin: 0 auto; }
Â  Â  Â  Â  .cb input { opacity: 0; width: 0; height: 0; }
Â  Â  Â  Â  .ck { position: absolute; top: 0; left: 0; height: 30px; width: 30px; background: var(--bg); border: 2.5px solid var(--border); border-radius: 8px; transition: 0.2s; }
Â  Â  Â  Â  .cb input:checked ~ .ck { background: var(--success); border-color: var(--success); }
Â  Â  Â  Â  .cb.yest input:checked ~ .ck { background: var(--warning); border-color: var(--warning); }
Â  Â  Â  Â  .ck:after { content: ""; position: absolute; display: none; left: 9px; top: 4px; width: 6px; height: 13px; border: solid white; border-width: 0 3px 3px 0; transform: rotate(45deg); }
Â  Â  Â  Â  .cb input:checked ~ .ck:after { display: block; }

Â  Â  Â  Â  .hidden { display: none !important; }
Â  Â  Â  Â  @media (max-width: 650px) {Â 
Â  Â  Â  Â  Â  Â  .input-bar { grid-template-columns: 1fr; }Â 
Â  Â  Â  Â  Â  Â  .score-grid { grid-template-columns: 1fr 1fr; }
Â  Â  Â  Â  Â  Â  .habit-header { flex-direction: column; align-items: flex-start !important; gap: 10px; }
Â  Â  Â  Â  Â  Â  .controls { justify-content: flex-start; width: 100%; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="container">
Â  Â  <header>
Â  Â  Â  Â  <h1 style="margin:0; font-weight: 800; letter-spacing: -1px;">To-Do List</h1>
Â  Â  Â  Â  <div class="nav-switch">
Â  Â  Â  Â  Â  Â  <button class="nav-btn active" onclick="showTab('tasks', this)">Tasks</button>
Â  Â  Â  Â  Â  Â  <button class="nav-btn" onclick="showTab('stats', this)">Stats</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button onclick="toggleTheme()" style="background:var(--card); border:1px solid var(--border); cursor:pointer; font-size:1rem; padding: 8px; border-radius: 12px;">ğŸŒ“</button>
Â  Â  </header>

Â  Â  <div class="score-grid">
Â  Â  Â  Â  <div class="score-card"><span class="score-v" id="score-day">0%</span><span class="score-l">Today</span></div>
Â  Â  Â  Â  <div class="score-card"><span class="score-v" id="score-qs">0</span><span class="score-l">Total Qs</span></div>
Â  Â  Â  Â  <div class="score-card"><span class="score-v" id="score-hrs">0</span><span class="score-l">Total Hrs</span></div>
Â  Â  Â  Â  <div class="score-card"><span class="score-v" id="score-streak">0</span><span class="score-l">Streak</span></div>
Â  Â  </div>

Â  Â  <!-- MAIN TASKS TAB -->
Â  Â  <div id="tab-tasks">
Â  Â  Â  Â  <div class="input-bar">
Â  Â  Â  Â  Â  Â  <input type="text" id="in-name" placeholder="New goal...">
Â  Â  Â  Â  Â  Â  <select id="in-cat">
Â  Â  Â  Â  Â  Â  Â  Â  <option>Study</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Q Practice">Q Practice</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Health</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Personal</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  <select id="in-sub">
Â  Â  Â  Â  Â  Â  Â  Â  <option>Physics</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Chemistry</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Math</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Other</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  <button class="add-btn" onclick="addHabit()">+</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="list"></div>
Â  Â  </div>

Â  Â  <!-- STATS TAB -->
Â  Â  <div id="tab-stats" class="hidden">
Â  Â  Â  Â  <div class="chart-card">
Â  Â  Â  Â  Â  Â  <div class="chart-header"><span class="chart-label">Yearly Consistency Map</span></div>
Â  Â  Â  Â  Â  Â  <div class="dot-grid-wrapper"><div id="dot-grid" class="dot-grid"></div></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="chart-card">
Â  Â  Â  Â  Â  Â  <div class="chart-header">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="chart-label">Monthly Analytics</span>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="month-filter" class="month-select" onchange="renderCharts()"></select>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <canvas id="chart-monthly"></canvas>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="chart-card"><span class="chart-label">Monthly Subject Hours</span><canvas id="chart-time"></canvas></div>
Â  Â  Â  Â  <div class="chart-card"><span class="chart-label">Monthly Subject Questions</span><canvas id="chart-qs"></canvas></div>
Â  Â  </div>
</div>

<script>
Â  Â  const getTodayStr = (date = new Date()) => {
Â  Â  Â  Â  const offset = date.getTimezoneOffset();
Â  Â  Â  Â  const adjustedDate = new Date(date.getTime() - (offset * 60 * 1000));
Â  Â  Â  Â  return adjustedDate.toISOString().split('T')[0];
Â  Â  };

Â  Â  let habits = JSON.parse(localStorage.getItem('todo_v32')) || [];
Â  Â  const colors = { Physics: '#3b82f6', Chemistry: '#10b981', Math: '#f43f5e', Other: '#64748b' };
Â  Â  let activeCharts = {};

Â  Â  function save() {Â 
Â  Â  Â  Â  localStorage.setItem('todo_v32', JSON.stringify(habits));Â 
Â  Â  Â  Â  render();Â 
Â  Â  }

Â  Â  function addHabit() {
Â  Â  Â  Â  const name = document.getElementById('in-name').value;
Â  Â  Â  Â  if (!name) return;
Â  Â  Â  Â  habits.push({
Â  Â  Â  Â  Â  Â  id: 'h' + Date.now(),
Â  Â  Â  Â  Â  Â  name,
Â  Â  Â  Â  Â  Â  category: document.getElementById('in-cat').value,
Â  Â  Â  Â  Â  Â  subject: document.getElementById('in-sub').value,
Â  Â  Â  Â  Â  Â  completions: [], timeLogs: {}, qLogs: {}
Â  Â  Â  Â  });
Â  Â  Â  Â  document.getElementById('in-name').value = '';
Â  Â  Â  Â  save();
Â  Â  }

Â  Â  function render() {
Â  Â  Â  Â  const list = document.getElementById('list');
Â  Â  Â  Â  const todayStr = getTodayStr();
Â  Â  Â  Â  const yest = new Date(); yest.setDate(yest.getDate() - 1);
Â  Â  Â  Â  const yestStr = getTodayStr(yest);

Â  Â  Â  Â  // Define HTML Generator for a single card
Â  Â  Â  Â  const createCard = (h) => {
Â  Â  Â  Â  Â  Â  const subCol = colors[h.subject] || colors.Other;
Â  Â  Â  Â  Â  Â  const isPers = h.category === 'Personal';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <div class="habit-card" style="border-left-color: ${subCol}">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="habit-header" style="display:flex; justify-content:space-between; align-items:center;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="subject-badge" style="color:${subCol}">${h.subject}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="margin:0; font-size:1.05rem;">${h.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- YESTERDAY GROUP -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="day-group yest">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="day-group-label">YEST</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${!isPers ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Hrs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.5" class="num-input" value="${h.timeLogs[yestStr] || 0}" onchange="logVal('${h.id}', 'time', this.value, '${yestStr}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${h.category === 'Q Practice' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Qs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" class="num-input" value="${h.qLogs[yestStr] || 0}" onchange="logVal('${h.id}', 'q', this.value, '${yestStr}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Done</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="cb yest"><input type="checkbox" ${h.completions.includes(yestStr)?'checked':''} onchange="toggle('${h.id}','${yestStr}')"><span class="ck"></span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- TODAY GROUP -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="day-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="day-group-label">TODAY</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${!isPers ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Hrs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.5" class="num-input" value="${h.timeLogs[todayStr] || 0}" onchange="logVal('${h.id}', 'time', this.value, '${todayStr}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${h.category === 'Q Practice' ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Qs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" class="num-input" value="${h.qLogs[todayStr] || 0}" onchange="logVal('${h.id}', 'q', this.value, '${todayStr}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-item"><span class="score-tiny">Done</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="cb"><input type="checkbox" ${h.completions.includes(todayStr)?'checked':''} onchange="toggle('${h.id}','${todayStr}')"><span class="ck"></span></label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="edit-${h.id}" class="edit-panel">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" value="${h.name}" onchange="editH('${h.id}','name',this.value)" style="flex:2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select onchange="editH('${h.id}','subject',this.value)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${Object.keys(colors).map(s => `<option ${h.subject===s?'selected':''}>${s}</option>`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="delH('${h.id}')" style="background:var(--danger); color:white; border:none; border-radius:8px; padding:10px 15px; cursor:pointer; font-weight:700;">Delete</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="document.getElementById('edit-${h.id}').classList.toggle('active')" style="background:none; border:none; color:var(--secondary); font-size:0.7rem; cursor:pointer; margin-top:12px; font-weight:700; padding:0;">âš™ï¸ EDIT TASK</button>
Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  };

Â  Â  Â  Â  // Segregate Tasks
Â  Â  Â  Â  const groups = {
Â  Â  Â  Â  Â  Â  'Physics': habits.filter(h => h.subject === 'Physics' && h.category !== 'Health' && h.category !== 'Personal'),
Â  Â  Â  Â  Â  Â  'Chemistry': habits.filter(h => h.subject === 'Chemistry' && h.category !== 'Health' && h.category !== 'Personal'),
Â  Â  Â  Â  Â  Â  'Mathematics': habits.filter(h => h.subject === 'Math' && h.category !== 'Health' && h.category !== 'Personal'),
Â  Â  Â  Â  Â  Â  'Health': habits.filter(h => h.category === 'Health'),
Â  Â  Â  Â  Â  Â  'Personal': habits.filter(h => h.category === 'Personal'),
Â  Â  Â  Â  Â  Â  'Other': habits.filter(h => h.subject === 'Other' && h.category !== 'Health' && h.category !== 'Personal')
Â  Â  Â  Â  };

Â  Â  Â  Â  let listHtml = '';
Â  Â  Â  Â  const sections = ['Physics', 'Chemistry', 'Mathematics', 'Health', 'Personal', 'Other'];

Â  Â  Â  Â  sections.forEach(sec => {
Â  Â  Â  Â  Â  Â  if (groups[sec] && groups[sec].length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  listHtml += `<div class="section-title">${sec}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  listHtml += groups[sec].map(createCard).join('');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  if (!listHtml && habits.length > 0) listHtml = habits.map(createCard).join('');

Â  Â  Â  Â  list.innerHTML = listHtml;
Â  Â  Â  Â  updateScores();
Â  Â  }

Â  Â  function drawChart(id, type, labels, data, color) {
Â  Â  Â  Â  if (activeCharts[id]) activeCharts[id].destroy();
Â  Â  Â  Â  const ctx = document.getElementById(id).getContext('2d');
Â  Â  Â  Â  activeCharts[id] = new Chart(ctx, {
Â  Â  Â  Â  Â  Â  type,
Â  Â  Â  Â  Â  Â  data: {Â 
Â  Â  Â  Â  Â  Â  Â  Â  labels,Â 
Â  Â  Â  Â  Â  Â  Â  Â  datasets: [{Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: Array.isArray(color) ? color : color,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: Array.isArray(color) ? color.map(c => c + 'cc') : color + '20',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fill: true, tension: 0.4, borderRadius: 6
Â  Â  Â  Â  Â  Â  Â  Â  }]Â 
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  options: {Â 
Â  Â  Â  Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  Â  Â  Â  plugins: { legend: false },Â 
Â  Â  Â  Â  Â  Â  Â  Â  scales: { y: { beginAtZero: true, grid: { color: 'rgba(100,100,100,0.1)' } }, x: { grid: { display: false } } }Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function renderCharts() {
Â  Â  Â  Â  const selectedMonth = parseInt(document.getElementById('month-filter').value);
Â  Â  Â  Â  const year = new Date().getFullYear();

Â  Â  Â  Â  const grid = document.getElementById('dot-grid'); grid.innerHTML = '';
Â  Â  Â  Â  for (let i = 0; i < 365; i++) {
Â  Â  Â  Â  Â  Â  const d = new Date(year, 0, 1); d.setDate(d.getDate() + i);
Â  Â  Â  Â  Â  Â  const count = habits.filter(h => h.completions.includes(getTodayStr(d))).length;
Â  Â  Â  Â  Â  Â  grid.innerHTML += `<div class="dot" style="background:${count > 0 ? 'var(--accent)' : 'var(--h0)'}; opacity:${count > 0 ? 0.3 + (count * 0.2) : 1}"></div>`;
Â  Â  Â  Â  }

Â  Â  Â  Â  const daysInMonth = new Date(year, selectedMonth + 1, 0).getDate();
Â  Â  Â  Â  const mLabels = Array.from({length: daysInMonth}, (_, i) => i + 1);
Â  Â  Â  Â  const mData = mLabels.map(day => {
Â  Â  Â  Â  Â  Â  let ds = getTodayStr(new Date(year, selectedMonth, day));
Â  Â  Â  Â  Â  Â  return habits.filter(h => h.completions.includes(ds)).length;
Â  Â  Â  Â  });
Â  Â  Â  Â  drawChart('chart-monthly', 'line', mLabels, mData, '#8b5cf6');

Â  Â  Â  Â  const subHours = { Physics: 0, Chemistry: 0, Math: 0, Other: 0 };
Â  Â  Â  Â  const subQs = { Physics: 0, Chemistry: 0, Math: 0, Other: 0 };
Â  Â  Â  Â Â 
Â  Â  Â  Â  habits.forEach(h => {
Â  Â  Â  Â  Â  Â  Object.keys(h.timeLogs).forEach(date => {
Â  Â  Â  Â  Â  Â  Â  Â  let d = new Date(date);
Â  Â  Â  Â  Â  Â  Â  Â  if (d.getMonth() === selectedMonth) subHours[h.subject] += h.timeLogs[date];
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Object.keys(h.qLogs).forEach(date => {
Â  Â  Â  Â  Â  Â  Â  Â  let d = new Date(date);
Â  Â  Â  Â  Â  Â  Â  Â  if (d.getMonth() === selectedMonth) subQs[h.subject] += h.qLogs[date];
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });

Â  Â  Â  Â  const bgCols = Object.keys(subHours).map(s => colors[s]);
Â  Â  Â  Â  drawChart('chart-time', 'bar', Object.keys(subHours), Object.values(subHours), bgCols);
Â  Â  Â  Â  drawChart('chart-qs', 'bar', Object.keys(subQs), Object.values(subQs), bgCols);
Â  Â  }

Â  Â  function logVal(id, type, val, dateStr) {
Â  Â  Â  Â  const h = habits.find(x => x.id === id);
Â  Â  Â  Â  const n = parseFloat(val) || 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Save the log
Â  Â  Â  Â  if (type === 'time') h.timeLogs[dateStr] = n;Â 
Â  Â  Â  Â  else h.qLogs[dateStr] = n;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Validation for auto-checking
Â  Â  Â  Â  const hrs = h.timeLogs[dateStr] || 0;
Â  Â  Â  Â  const qs = h.qLogs[dateStr] || 0;
Â  Â  Â  Â  const isDone = h.completions.includes(dateStr);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Only auto-check if NOT already done and inputs are valid > 0
Â  Â  Â  Â  if (!isDone) {
Â  Â  Â  Â  Â  Â  if (h.category === 'Q Practice') {
Â  Â  Â  Â  Â  Â  Â  Â  if (hrs > 0 && qs > 0) h.completions.push(dateStr);
Â  Â  Â  Â  Â  Â  } else if (h.category === 'Personal') {
Â  Â  Â  Â  Â  Â  Â  Â  // Do not auto-check personal, it requires manual check
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Standard Study/Health/Other -> Requires Hours > 0
Â  Â  Â  Â  Â  Â  Â  Â  if (hrs > 0) h.completions.push(dateStr);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  save();
Â  Â  }

Â  Â  function toggle(id, ds) {
Â  Â  Â  Â  const h = habits.find(x => x.id === id);
Â  Â  Â  Â  const idx = h.completions.indexOf(ds);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // If checking (turning ON)
Â  Â  Â  Â  if (idx === -1) {
Â  Â  Â  Â  Â  Â  const hrs = h.timeLogs[ds] || 0;
Â  Â  Â  Â  Â  Â  const qs = h.qLogs[ds] || 0;

Â  Â  Â  Â  Â  Â  // Logic 1: Q Practice needs Time AND Questions
Â  Â  Â  Â  Â  Â  if (h.category === 'Q Practice') {
Â  Â  Â  Â  Â  Â  Â  Â  if (hrs <= 0 || qs <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("For Q Practice, you must enter both Hours and Number of Questions!");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  render(); // Re-render to uncheck the box visually
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  // Logic 2: Personal needs nothing (pass)
Â  Â  Â  Â  Â  Â  // Logic 3: Everything else (Study, Health) needs Time
Â  Â  Â  Â  Â  Â  else if (h.category !== 'Personal') {
Â  Â  Â  Â  Â  Â  Â  Â  if (hrs <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Please input the number of hours first!");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  render(); // Re-render to uncheck
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // If passed, push
Â  Â  Â  Â  Â  Â  h.completions.push(ds);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Unchecking is always allowed
Â  Â  Â  Â  Â  Â  h.completions.splice(idx, 1);
Â  Â  Â  Â  }
Â  Â  Â  Â  save();
Â  Â  }

Â  Â  function updateScores() {
Â  Â  Â  Â  const todayStr = getTodayStr();
Â  Â  Â  Â  const done = habits.filter(h => h.completions.includes(todayStr)).length;
Â  Â  Â  Â  let tQ = 0, tH = 0;
Â  Â  Â  Â  habits.forEach(h => {
Â  Â  Â  Â  Â  Â  tQ += Object.values(h.qLogs).reduce((a,b)=>a+b, 0);
Â  Â  Â  Â  Â  Â  tH += Object.values(h.timeLogs).reduce((a,b)=>a+b, 0);
Â  Â  Â  Â  });
Â  Â  Â  Â  document.getElementById('score-day').innerText = habits.length ? Math.round(done/habits.length*100) + '%' : '0%';
Â  Â  Â  Â  document.getElementById('score-qs').innerText = tQ;
Â  Â  Â  Â  document.getElementById('score-hrs').innerText = tH.toFixed(1);
Â  Â  Â  Â  document.getElementById('score-streak').innerText = calculateStreak();
Â  Â  }

Â  Â  function calculateStreak() {
Â  Â  Â  Â  let s = 0; let d = new Date();
Â  Â  Â  Â  while(true) {
Â  Â  Â  Â  Â  Â  let ds = getTodayStr(d);
Â  Â  Â  Â  Â  Â  if (habits.some(h => h.completions.includes(ds))) { s++; d.setDate(d.getDate()-1); }
Â  Â  Â  Â  Â  Â  else break;
Â  Â  Â  Â  }
Â  Â  Â  Â  return s;
Â  Â  }

Â  Â  function showTab(t, btn) {
Â  Â  Â  Â  document.getElementById('tab-tasks').classList.toggle('hidden', t !== 'tasks');
Â  Â  Â  Â  document.getElementById('tab-stats').classList.toggle('hidden', t !== 'stats');
Â  Â  Â  Â  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
Â  Â  Â  Â  btn.classList.add('active');
Â  Â  Â  Â  if (t === 'stats') renderCharts();
Â  Â  }

Â  Â  function populateMonthFilter() {
Â  Â  Â  Â  const select = document.getElementById('month-filter');
Â  Â  Â  Â  const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
Â  Â  Â  Â  select.innerHTML = months.map((m, i) => `<option value="${i}" ${i === new Date().getMonth() ? 'selected' : ''}>${m}</option>`).join('');
Â  Â  }

Â  Â  function editH(id, k, v) { habits.find(x => x.id === id)[k] = v; save(); }
Â  Â  function delH(id) { if(confirm('Delete?')) { habits = habits.filter(x => x.id !== id); save(); } }
Â  Â Â 
Â  Â  function toggleTheme() {
Â  Â  Â  Â  const t = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
Â  Â  Â  Â  document.body.setAttribute('data-theme', t);
Â  Â  Â  Â  localStorage.setItem('todo_theme', t);
Â  Â  }

Â  Â  if (localStorage.getItem('todo_theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
Â  Â  populateMonthFilter();
Â  Â  render();
</script>
</body>
</html> i want a suitable icon for this ipad appâ€¦. Pls do soâ€¦.
